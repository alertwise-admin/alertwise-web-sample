<!DOCTYPE html>
<html lang="en">
<head>
    <title>AlertWise Web SDK Sample Demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="./favicon.svg" type="image/x-icon"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <script src="https://d1kp3btf39ysac.cloudfront.net/alertwise/integrate/alert-wise.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --bs-primary: #0161ef;
            --bs-primary-rgb: 86, 50, 232;
            --bs-link-color: #5632E8;
            --bs-link-hover-color: #4528b9;
        }

        body {
            font-family: 'ui-sans-serif', 'sans-serif', 'Manrope', '-apple-system';
            background-color: #f8f9fa;
        }

        .navbar {
            border-bottom: 1px solid #e9ecef;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }

        .navbar-brand img {
            max-height: 35px;
        }

        .nav-link {
            font-weight: 700;
        }

        .btn-outline-primary {
            --bs-btn-border-color: #5632E8;
            --bs-btn-hover-bg: #5632E8;
            --bs-btn-hover-border-color: #5632E8;
            --bs-btn-active-bg: #4528b9;
            --bs-btn-active-border-color: #4528b9;
        }

        .card {
            border: 1px solid #e9ecef;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }

        .card-header {
            background-color: #fff;
            border-bottom: 1px solid #e9ecef;
        }

        .main-header {
            padding-top: 4rem;
            padding-bottom: 4rem;
        }

        .main-header h1 {
            font-weight: 800;
        }

        #eventLog {
            height: 300px;
            background-color: #212529;
            color: #f8f9fa;
            font-family: monospace;
            font-size: 0.875rem;
        }

        .code-viewer {
            border-top: 1px solid rgba(0, 0, 0, .175);
            border-bottom-left-radius: var(--bs-card-border-radius);
            border-bottom-right-radius: var(--bs-card-border-radius);
            margin: 0;
            padding: 1rem;
        }

        .site-footer {
            background-color: #1a1a1a;
            color: #fff;
            padding-top: 4rem;
            padding-bottom: 2rem;
            font-size: 0.9rem;
        }

        .site-footer .footer-logo {
            max-height: 40px;
            margin-bottom: 1.5rem;
        }

        .site-footer a {
            color: #adb5bd;
            text-decoration: none;
        }

        .site-footer a:hover {
            color: #fff;
        }

        .site-footer .nav-link {
            padding: 0.25rem 0;
        }

        .site-footer h5 {
            color: #fff;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .site-footer .social-icons a {
            font-size: 1.5rem;
        }

        .copyright {
            border-top: 1px solid #343a40;
            padding-top: 1.5rem;
            margin-top: 2rem;
            color: #adb5bd;
        }

    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg bg-body-tertiary sticky-top">
    <div class="container">
        <a class="navbar-brand" href="https://alertwise.net/">
            <img src="https://cdn.alertwise.net/alertwise/img/alertwise-logo.svg" alt="AlertWise Logo">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item"><a class="nav-link" target="_blank" href="https://alertwise.net/">Platform</a></li>
                <li class="nav-item"><a class="nav-link" target="_blank"
                                        href="https://alertwise.net/pricing">Pricing</a></li>
                <li class="nav-item"><a class="nav-link" target="_blank" href="https://documentation.alertwise.net/">Documentation</a>
                </li>
                <li class="nav-item"><a class="nav-link" target="_blank" href="https://blog.alertwise.net/">Blog</a>
                </li>
            </ul>
            <div class="d-flex">
                <a target="_blank" href="https://app.alertwise.net/#/login" class="btn btn-outline-primary me-2 rounded-0">
                    <i class="bi bi-person"></i> Login
                </a>
                <a target="_blank" href="https://app.alertwise.net/#/signup" class="btn btn-primary rounded-0">
                    Get Started <i class="bi bi-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
</nav>

<div class="container">
    <header class="text-center main-header">
        <h1>AlertWise Web SDK Sample Demo</h1>
        <p class="lead text-muted">A demonstration of the AlertWise Web SDK features with code examples.</p>
    </header>

    <main class="row g-4 pb-5">
        <div class="col-lg-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Subscription Status</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span>Notification Permission:</span>
                        <span id="permissionStatus" class="badge bg-secondary">Checking...</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span>Subscription Status:</span>
                        <span id="subscriptionStatus" class="badge bg-secondary">Checking...</span>
                    </div>
                    <div class="mb-3">
                        <strong>Subscriber ID:</strong>
                        <code id="subscriberId" class="d-block text-truncate">Not subscribed</code>
                    </div>
                    <div id="subscriptionActions" class="d-grid gap-2">
                        <button class="btn btn-primary" onclick="alertwise.subscribe()">Subscribe</button>
                        <button class="btn btn-danger" onclick="alertwise.unsubscribe()">Unsubscribe</button>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a class="icon-link" data-bs-toggle="collapse" href="#subscriptionCodeCollapse" role="button"
                       aria-expanded="false" aria-controls="subscriptionCodeCollapse">
                        <i class="bi bi-code-slash"></i>
                        View Code
                    </a>
                </div>
                <div class="collapse" id="subscriptionCodeCollapse">
                    <pre class="code-viewer bg-dark text-light mb-0"><code>// Subscribe
alertwise.push(['subscribe']);

// Unsubscribe
alertwise.push(['unsubscribe']);

// Get Subscriber ID
alertwise.getSubscriberId().then(id => console.log(id));
</code></pre>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Manage Segments</h5>
                </div>
                <div class="card-body">
                    <div class="input-group mb-3">
                        <span class="input-group-text">Segment ID</span>
                        <input type="text" id="segmentId" class="form-control" placeholder="e.g., 'new-users'">
                    </div>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                        <button type="button" class="btn btn-outline-success" onclick="addSegment()">Add to Segment
                        </button>
                        <button type="button" class="btn btn-outline-warning" onclick="removeSegment()">Remove from
                            Segment
                        </button>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a class="icon-link" data-bs-toggle="collapse" href="#segmentCodeCollapse" role="button"
                       aria-expanded="false" aria-controls="segmentCodeCollapse">
                        <i class="bi bi-code-slash"></i>
                        View Code
                    </a>
                </div>
                <div class="collapse" id="segmentCodeCollapse">
                    <pre class="code-viewer bg-dark text-light mb-0"><code>// Add to Segment
const segmentId = 'new-users';
alertwise.addSegment(segmentId);

// Remove from Segment
const segmentId = 'new-users';
alertwise.removeSegment(segmentId);
</code></pre>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Manage Tags</h5>
                </div>
                <div class="card-body">
                    <div class="input-group mb-3">
                        <span class="input-group-text">Key</span>
                        <input type="text" id="tagKey" class="form-control" placeholder="e.g., 'level'">
                        <span class="input-group-text">Value</span>
                        <input type="text" id="tagValue" class="form-control" placeholder="e.g., '5'">
                    </div>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                        <button type="button" class="btn btn-outline-success" onclick="addTag()">Add/Update Tag</button>
                        <button type="button" class="btn btn-outline-warning" onclick="removeTag()">Remove Tag</button>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a class="icon-link" data-bs-toggle="collapse" href="#tagCodeCollapse" role="button"
                       aria-expanded="false" aria-controls="tagCodeCollapse">
                        <i class="bi bi-code-slash"></i>
                        View Code
                    </a>
                </div>
                <div class="collapse" id="tagCodeCollapse">
                    <pre class="code-viewer bg-dark text-light mb-0"><code>// Add/Update a Tag
alertwise.addTag('plan', 'premium');

// Add/Update multiple Tags
alertwise.addTag({ 'level': 5, 'is_active': true });

// Remove a Tag
alertwise.removeTag('plan');
</code></pre>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Manage Subscriber Properties</h5>
                </div>
                <div class="card-body">
                    <div class="input-group mb-3">
                        <span class="input-group-text">Key</span>
                        <input type="text" id="propKey" class="form-control" placeholder="e.g., 'firstName'">
                        <span class="input-group-text">Value</span>
                        <input type="text" id="propValue" class="form-control" placeholder="e.g., 'John'">
                    </div>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                        <button type="button" class="btn btn-outline-success" onclick="setProperty()">Set Property
                        </button>
                        <button type="button" class="btn btn-outline-warning" onclick="removeProperty()">Remove
                            Property
                        </button>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a class="icon-link" data-bs-toggle="collapse" href="#propertyCodeCollapse" role="button"
                       aria-expanded="false" aria-controls="propertyCodeCollapse">
                        <i class="bi bi-code-slash"></i>
                        View Code
                    </a>
                </div>
                <div class="collapse" id="propertyCodeCollapse">
                    <pre class="code-viewer bg-dark text-light mb-0"><code>// Set a Property
alertwise.setSubscriberProperty('firstName', 'John');

// Set multiple Properties
alertwise.setSubscriberProperty({ 'lastName': 'Doe', 'email': 'john.doe@example.com' });

// Remove a Property
alertwise.removeSubscriberProperty('firstName');
</code></pre>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Event Log</h5>
                </div>
                <div class="card-body">
                    <div id="eventLog" class="form-control" readonly style="overflow-y: auto; scrollbar-width: thin;"></div>
                </div>
            </div>
        </div>
    </main>
</div>

<footer class="site-footer" style="padding-top: 1rem;padding-bottom: 1rem;">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 mb-4 mb-lg-0">
                <a href="https://alertwise.net/">
                    <img src="https://cdn.alertwise.net/alertwise/img/alertwise-logo-dark.svg" alt="AlertWise Logo"
                         class="footer-logo">
                </a>
                <p class="pe-4 small">AlertWise empowers businesses with powerful web push notifications for both
                    desktop and mobile, helping drive traffic, increase revenue, and boost customer engagement. With
                    seamless integration, real-time targeting, 24/7 expert support, and an intuitive dashboard, our
                    scalable platform simplifies campaign management and delivers actionable insights to maximize growth
                    and retention.</p>
                <div class="social-icons d-flex gap-2">
                    <a href="https://x.com/AlertWisePush"><i class="fs-6 bi bi-twitter-x"></i></a>
                    <a href="https://www.youtube.com/@Alertwisenotification"><i class="fs-6 bi bi-youtube"></i></a>
                    <a href="https://www.instagram.com/alertwisepushnotifications"><i class="fs-6 bi bi-instagram"></i></a>
                    <a href="https://www.facebook.com/profile.php?id=61574061916938"><i class="fs-6 bi bi-facebook"></i></a>
                    <a href="#"><i class="fs-6 bi bi-linkedin"></i></a>
                    <a href="https://github.com/alertwise-admin"><i class="fs-6 bi bi-github"></i></a>
                    <a href="https://wa.me/message/DZWXUJHIJ5ABH1"><i class="fs-6 bi bi-whatsapp"></i></a>
                    <a href="https://t.me/AlertWise"><i class="fs-6 bi bi-telegram"></i></a>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-6 mb-4 mb-lg-0">
                <h5>Product</h5>
                <ul class="nav flex-column">
                    <li class="nav-item"><a target="_blank" href="https://alertwise.net/features" class="nav-link">Features</a></li>
                    <li class="nav-item"><a target="_blank" href="https://alertwise.net/pricing" class="nav-link">Pricing</a></li>
                    <li class="nav-item"><a target="_blank" href="https://alertwise.net/testimonials" class="nav-link">Testimonials</a></li>
                    <li class="nav-item"><a target="_blank" href="https://documentation.alertwise.net/" class="nav-link">Documentation</a></li>

                </ul>
            </div>
            <div class="col-lg-2 col-md-4 col-6 mb-4 mb-lg-0">
                <h5>Resources</h5>
                <ul class="nav flex-column">
                    <li class="nav-item"><a target="_blank" href="https://www.youtube.com/@Alertwisenotification" class="nav-link">Video Tutorials</a></li>
                    <li class="nav-item"><a target="_blank" href="https://blog.alertwise.net/questions/" class="nav-link">Community</a></li>
                    <li class="nav-item"><a target="_blank" href="https://blog.alertwise.net/" class="nav-link">Blog</a></li>
                    <li class="nav-item"><a target="_blank" href="https://documentation.alertwise.net/faqs/faqs/" class="nav-link">FAQs</a></li>
                </ul>
            </div>
            <div class="col-lg-2 col-md-4 col-12">
                <h5>Company</h5>
                <ul class="nav flex-column">
                    <li class="nav-item"><a target="_blank" href="https://alertwise.net/about" class="nav-link">About Us</a></li>
                    <li class="nav-item"><a target="_blank" href="https://alertwise.net/contact" class="nav-link">Contact</a></li>
                    <li class="nav-item"><a target="_blank" href="https://alertwise.net/company" class="nav-link">Company</a></li>
                    <li class="nav-item"><a target="_blank" href="https://blog.alertwise.net/glossary/" class="nav-link">Glossary</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright text-center" style="margin-top: 1rem">
            &copy; 2025 AlertWise. All rights reserved.
        </div>
    </div>
</footer>


<script>
    // 3. Initialize the SDK
    alertwise = window.alertwise || [];
    alertwise.push(["init", {
        appId: "68d5a0730191cb2190d77785",
        applicationServerPublicKey: "BOL55FgwyxsiNXT-B9GuRC4StkCLYdMDy2rQcuuquDic1deZColRAMldG9QH1S3T8vLMRkBlRG8vJz9WP4CsK-E"
    }]);

    const permissionStatusEl = document.getElementById('permissionStatus');
    const subscriptionStatusEl = document.getElementById('subscriptionStatus');
    const subscriberIdEl = document.getElementById('subscriberId');
    const subscriptionActionsEl = document.getElementById('subscriptionActions');
    const eventLogEl = document.getElementById('eventLog');

    function logEvent(eventName, data) {
        const now = new Date().toLocaleTimeString();
        const dataString = data ? JSON.stringify(data) : '';
        const logMessage = `[${now}] ${eventName} ${dataString}\n`;
        console.log(eventName, data);
        eventLogEl.textContent += logMessage;
        eventLogEl.scrollTop = eventLogEl.scrollHeight; // Auto-scroll
    }

    function updatePermissionStatus(permission) {
        permissionStatusEl.textContent = permission;
        permissionStatusEl.className = 'badge'; // reset classes
        if (permission === 'granted') {
            permissionStatusEl.classList.add('bg-success');
        } else if (permission === 'denied') {
            permissionStatusEl.classList.add('bg-danger');
        } else {
            permissionStatusEl.classList.add('bg-warning', 'text-dark');
        }
    }

    function updateSubscriptionStatus(isSubscribed) {
        subscriptionStatusEl.textContent = isSubscribed ? 'Subscribed' : 'Unsubscribed';
        subscriptionStatusEl.className = `badge ${isSubscribed ? 'bg-success' : 'bg-danger'}`;
        subscriptionActionsEl.querySelector('.btn-primary').style.display = isSubscribed ? 'none' : 'block';
        subscriptionActionsEl.querySelector('.btn-danger').style.display = isSubscribed ? 'block' : 'none';
    }

    function updateSubscriberId(id) {
        subscriberIdEl.textContent = id || 'Not subscribed';
    }

    function addSegment() {
        const segmentId = document.getElementById('segmentId').value;
        if (!segmentId) {
            alert('Please enter a Segment ID.');
            return;
        }
        alertwise.addSegment(segmentId);
        logEvent('Attempting to add to segment', {segmentId});
    }

    function removeSegment() {
        const segmentId = document.getElementById('segmentId').value;
        if (!segmentId) {
            alert('Please enter a Segment ID.');
            return;
        }
        alertwise.removeSegment(segmentId);
        logEvent('Attempting to remove from segment', {segmentId});
    }

    function addTag() {
        const key = document.getElementById('tagKey').value;
        const value = document.getElementById('tagValue').value;
        if (!key || !value) {
            alert('Please enter both a tag key and value.');
            return;
        }
        alertwise.addTag(key, value);
        logEvent('Attempting to add tag', {key, value});
    }

    function removeTag() {
        const key = document.getElementById('tagKey').value;
        if (!key) {
            alert('Please enter a tag key to remove.');
            return;
        }
        alertwise.removeTag(key);
        logEvent('Attempting to remove tag', {key});
    }

    function setProperty() {
        const key = document.getElementById('propKey').value;
        const value = document.getElementById('propValue').value;
        if (!key || !value) {
            alert('Please enter both a property key and value.');
            return;
        }
        alertwise.setSubscriberProperty(key, value);
        logEvent('Attempting to set property', {key, value});
    }

    function removeProperty() {
        const key = document.getElementById('propKey').value;
        if (!key) {
            alert('Please enter a property key to remove.');
            return;
        }
        alertwise.removeSubscriberProperty(key);
        logEvent('Attempting to remove property', {key});
    }

    // Use the alertwise.push queue to run code after the SDK is ready
    alertwise.push(function () {
        logEvent('AlertWise.onSDKReady');

        // Initial status check
        alertwise.getPermission().then(updatePermissionStatus);
        alertwise.getSubscriberId().then(id => {
            updateSubscriptionStatus(!!id);
            updateSubscriberId(id);
        });
    });

    // --- Event Listeners ---

    window.addEventListener('AlertWise.onSubscribe', function (event) {
        logEvent('AlertWise.onSubscribe', event.detail);
        const subscriberId = event.detail.subscriber.id;
        updateSubscriptionStatus(true);
        updateSubscriberId(subscriberId);
        alertwise.getPermission().then(updatePermissionStatus);
    });

    window.addEventListener('AlertWise.onUnsubscribe', function () {
        logEvent('AlertWise.onUnsubscribe');
        updateSubscriptionStatus(false);
        updateSubscriberId(null);
    });

    window.addEventListener('AlertWise.onPermissionGranted', function (event) {
        logEvent('AlertWise.onPermissionGranted', event.detail);
        updatePermissionStatus('granted');
    });

    window.addEventListener('AlertWise.onPermissionDenied', function (event) {
        logEvent('AlertWise.onPermissionDenied', event.detail);
        updatePermissionStatus('denied');
    });

    window.addEventListener('AlertWise.onSDKError', function (event) {
        logEvent('AlertWise.onSDKError', event.detail);
    });

    window.addEventListener('AlertWise.onNotificationClick', (e) => logEvent('AlertWise.onNotificationClick', e.detail));
    window.addEventListener('AlertWise.onNotificationDisplayed', (e) => logEvent('AlertWise.onNotificationDisplayed', e.detail));
    window.addEventListener('AlertWise.onNotificationClose', (e) => logEvent('AlertWise.onNotificationClose', e.detail));
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
